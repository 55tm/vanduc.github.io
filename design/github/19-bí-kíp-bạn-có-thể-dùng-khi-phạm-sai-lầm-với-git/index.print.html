<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.124.1">
    <meta name="generator" content="Relearn 5.26.2+tip">
    <meta name="description" content="Documentation for Hugo Relearn Theme">
    <meta name="author" content="Sören Weber">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="http://localhost:1313/images/hero.png">
    <meta name="twitter:title" content="Bài 03 :: Hugo Relearn Theme">
    <meta name="twitter:description" content="Bài viết được dịch từ bài Gitでやらかした時に使える19個の奥義 của tác giả muran001 trên Qiita.
(Image Source: Medium)
Những nội dung sau rất nguy hiểm, nếu bạn làm theo, xin hãy chịu trách nhiệm về bản thân mình.
Nếu có gì sai sót, mong bạn hãy chỉ ra để tôi được biết
Ở trên local Có hiệu quả khi làm việc trên môi truờng phát triển của bản thân, không làm ảnh hưởng đến người khác.">
    <meta property="og:title" content="Bài 03 :: Hugo Relearn Theme">
    <meta property="og:description" content="Bài viết được dịch từ bài Gitでやらかした時に使える19個の奥義 của tác giả muran001 trên Qiita.
(Image Source: Medium)
Những nội dung sau rất nguy hiểm, nếu bạn làm theo, xin hãy chịu trách nhiệm về bản thân mình.
Nếu có gì sai sót, mong bạn hãy chỉ ra để tôi được biết
Ở trên local Có hiệu quả khi làm việc trên môi truờng phát triển của bản thân, không làm ảnh hưởng đến người khác.">
    <meta property="og:type" content="article">
    <meta property="og:url" content="http://localhost:1313/design/github/19-b%C3%AD-k%C3%ADp-b%E1%BA%A1n-c%C3%B3-th%E1%BB%83-d%C3%B9ng-khi-ph%E1%BA%A1m-sai-l%E1%BA%A7m-v%E1%BB%9Bi-git/index.html">
    <meta property="og:image" content="http://localhost:1313/images/hero.png">
    <meta property="article:section" content="GITHUB :: Hugo Relearn Theme">
    <meta property="og:site_name" content="Hugo Relearn Theme">
    <title>Bài 03 :: Hugo Relearn Theme</title>
    <link href="http://localhost:1313/design/github/19-b%C3%AD-k%C3%ADp-b%E1%BA%A1n-c%C3%B3-th%E1%BB%83-d%C3%B9ng-khi-ph%E1%BA%A1m-sai-l%E1%BA%A7m-v%E1%BB%9Bi-git/index.html" rel="canonical" type="text/html" title="Bài 03 :: Hugo Relearn Theme">
    <link href="../../../design/github/19-b%C3%AD-k%C3%ADp-b%E1%BA%A1n-c%C3%B3-th%E1%BB%83-d%C3%B9ng-khi-ph%E1%BA%A1m-sai-l%E1%BA%A7m-v%E1%BB%9Bi-git/index.xml" rel="alternate" type="application/rss+xml" title="Bài 03 :: Hugo Relearn Theme">
    <link href="../../../images/logo.svg?1712916289" rel="icon" type="image/svg+xml">
    
    <!-- https://github.com/filamentgroup/loadCSS/blob/master/README.md#how-to-use -->
    <link href="../../../css/fontawesome-all.min.css?1712916289" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="../../../css/fontawesome-all.min.css?1712916289" rel="stylesheet"></noscript>
    <link href="../../../css/nucleus.css?1712916289" rel="stylesheet">
    <link href="../../../css/auto-complete.css?1712916289" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="../../../css/auto-complete.css?1712916289" rel="stylesheet"></noscript>
    <link href="../../../css/perfect-scrollbar.min.css?1712916289" rel="stylesheet">
    <link href="../../../css/fonts.css?1712916289" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="../../../css/fonts.css?1712916289" rel="stylesheet"></noscript>
    <link href="../../../css/theme.css?1712916289" rel="stylesheet">
    <link href="../../../css/theme-relearn-auto.css?1712916290" rel="stylesheet" id="R-variant-style">
    <link href="../../../css/chroma-relearn-auto.css?1712916290" rel="stylesheet" id="R-variant-chroma-style">
    <link href="../../../css/variant.css?1712916290" rel="stylesheet">
    <link href="../../../css/print.css?1712916290" rel="stylesheet" media="print">
    <link href="../../../css/format-print.css?1712916290" rel="stylesheet">
    <link href="../../../css/ie.css?1712916290" rel="stylesheet">
    <script src="../../../js/url.js?1712916290"></script>
    <script src="../../../js/variant.js?1712916290"></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.relBasePath='..\/..\/..';
      window.relearn.relBaseUri='..\/..\/..';
      window.relearn.absBaseUri='http:\/\/localhost:1313';
      window.index_js_url="../../../index.search.js";
      // variant stuff
      window.relearn.themeVariantModifier='';
      window.variants && variants.init( [ 'relearn-auto', 'relearn-light', 'relearn-dark', 'relearn-bright', 'zen-auto', 'zen-light', 'zen-dark', 'neon', 'learn', 'blue', 'green', 'red' ] );
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
    </script>
  </head>
  <body class="mobile-support print disableInlineCopyToClipboard" data-url="../../../design/github/19-b%C3%AD-k%C3%ADp-b%E1%BA%A1n-c%C3%B3-th%E1%BB%83-d%C3%B9ng-khi-ph%E1%BA%A1m-sai-l%E1%BA%A7m-v%E1%BB%9Bi-git/index.html">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="disable" data-width-s="show" data-width-m="hide" data-width-l="hide"><button class="topbar-control" onclick="toggleNav()" type="button" title="Menu (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button>
            </div>
          </div>
          <ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype="http://schema.org/BreadcrumbList"><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><span itemprop="name">DESIGN</span><meta itemprop="position" content="1">&nbsp;>&nbsp;</li><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><span itemprop="name">GITHUB</span><meta itemprop="position" content="2">&nbsp;>&nbsp;</li><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><span itemprop="name">Bài 03</span><meta itemprop="position" content="3"></li>
          </ol>
          <div class="topbar-area topbar-area-end" data-area="end">
          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable default" tabindex="-1">
        <div class="flex-block-wrapper">
          <article class="default">
            <header class="headline">
<div class=" taxonomy-tags term-list cstyle  tags" title="Tags" style="--VARIABLE-TAGS-BG-color: var(--INTERNAL-TAG-BG-color);">
  <ul>
    <li><a class="term-link" href="../../../tags/github/index.html">Github</a></li>
    <li><a class="term-link" href="../../../tags/webdesign/index.html">WebDesign</a></li>
  </ul>
</div>
            </header>
<h1 id="bài-03">Bài 03</h1>

<p>Bài viết được dịch từ bài <a href="http://qiita.com/muran001/items/dea2bbbaea1260098051" target="_blank">Gitでやらかした時に使える19個の奥義</a> của tác giả <a href="http://qiita.com/muran001" target="_blank">muran001</a> trên Qiita.</p>
<hr>
<p><a href="#R-image-f2f9d975721b01082c4eac2216920a4f" class="lightbox-link"><img class="bg-white border lazy lightbox noshadow figure-image" loading="lazy" src="https://images.viblo.asia/283b89a2-7a23-42fd-9c4b-0d419af3b967.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-f2f9d975721b01082c4eac2216920a4f"><img class="bg-white border lazy lightbox noshadow lightbox-image" loading="lazy" src="https://images.viblo.asia/283b89a2-7a23-42fd-9c4b-0d419af3b967.png"></a> (Image Source: Medium)</p>
<p>Những nội dung sau rất nguy hiểm, nếu bạn làm theo, xin hãy chịu trách nhiệm về bản thân mình.</p>
<p>Nếu có gì sai sót, mong bạn hãy chỉ ra để tôi được biết</p>
<h2 id="ở-trên-local">Ở trên local</h2>
<p>Có hiệu quả khi làm việc trên môi truờng phát triển của bản thân, không làm ảnh hưởng đến người khác. Khi làm việc trên remote sẽ phát sinh ảnh hưởng đến người khác nên rất nguy hiểm.</p>
<h2 id="sự-cố-1-khi-trong-commit-message-lỡ-có-những-từ-cấm-kị-khiến-bạn-chỉ-muốn-chết-đi-cho-xong">Sự cố 1： Khi trong commit message lỡ có những từ cấm kị khiến bạn chỉ muốn chết đi cho xong</h2>
<p>Để sửa lại nội dung commit thì rất đơn giản. Cũng có thể thêm được cả file vào trong commit</p>
<div class="highlight wrap-code"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ git commit --amend <span class="c1"># Sau lệnh này ta có thể thay đổi nội dung commit message một cách tuỳ ý</span></span></span></code></pre></div><h2 id="sự-cố-2-khi-lỡ-tay-commit-dưới-tên-của-môt-user-khác">Sự cố 2： Khi lỡ tay commit dưới tên của môt user khác</h2>
<p>Khi làm việc ở nhà và khi làm việc trên công ty thì hẳn sẽ có lúc sử dung git config khác nhau và cũng có lúc bị nhầm thiết lập.</p>
<p>Ở đây chúng ta đang nói về việc thay đổi tác giả (Author) Hãy đổi Commiter ở <code>.gitconfig</code> hoặc <code>.git/config</code></p>
<h3 id="khi-muốn-đổi-tên-user-hoặc-email-của-head">Khi muốn đổi tên user hoặc email của HEAD</h3>
<div class="highlight wrap-code"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># Hãy sửa lại user.name và user.email $ git commit --amend -m &#34;nội dung commit message&#34; --author=&#34;user.name &lt;user.email&gt;&#34;</span></span></span></code></pre></div><h3 id="trường-hợp-muốn-sửa-lại-commit-từ-lâu-rồi">Trường hợp muốn sửa lại commit từ lâu rồi</h3>
<div class="highlight wrap-code"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ git rebase -i &lt;commit&gt; <span class="o">====</span> <span class="c1"># Sau lệnh này sẽ mở ra editor nên hãy sửa lại như sau rồi lưu lại # (trước khi sửa) các commit cũ từ trên xuống dưới pick aa11bbc commit message 1 pick b2c3c4d commit message 2 pick 4e56fgh commit message 3 ・・・ # (Sau khi sửa) Đổi commit cần sửa sang edit edit aa11bbc commit message 1 pick b2c3c4d commit message 2 pick 4e56fgh commit message 3 ・・・ ==== # Sau đó thì sửa tương tự $ git commit --amend -m &#34;commit message&#34; --author=&#34;user.name &lt;user.email&gt;&#34; # Trở lại như cũ $ git rebase --continue</span></span></span></code></pre></div><h3 id="nguy-hiểm-viết-lại-toàn-bộ-lịch-sử-commit">(NGUY HIỂM) Viết lại toàn bộ lịch sử commit</h3>
<p>Khi muốn sửa các commit của người dùng (committer) nhất định thì có thể dùng cách sau để sửa</p>
<p>Lịch sử commit sẽ bị thay đổi hoàn toàn</p>
<div class="highlight wrap-code"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">git filter-branch --commit-filter <span class="s1">&#39; if [ &#34;$GIT_COMMITTER_NAME&#34; = &#34;&lt;Old Name&gt;&#34; ]; then GIT_COMMITTER_NAME=&#34;&lt;New Name&gt;&#34;; GIT_AUTHOR_NAME=&#34;&lt;New Name&gt;&#34;; GIT_COMMITTER_EMAIL=&#34;&lt;New Email&gt;&#34;; GIT_AUTHOR_EMAIL=&#34;&lt;New Email&gt;&#34;; git commit-tree &#34;$@&#34;; else git commit-tree &#34;$@&#34;; fi&#39;</span> HEAD</span></span></code></pre></div><h2 id="sự-cố-３-khi-đã-lỡ-tay-commit-một-số-file-thừa-nhưng-sau-khi-nghĩ-lại-thì-nên-ignore-thì-hơn">Sự cố ３： Khi đã lỡ tay commit một số file thừa nhưng sau khi nghĩ lại thì nên ignore thì hơn</h2>
<h3 id="trường-hợp-commit-xoá">Trường hợp commit xoá</h3>
<p>Nếu có những phần thừa thì ta xoá đi rồi thêm vào ignore</p>
<div class="highlight wrap-code"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># Đầu tiên là xoá các file đã commit khỏi repository $ git rm --cached &lt;tên file&gt; # Sau đó là thêm vào gitignore $ echo &#39;&lt;tên file&gt;&#39; &gt;&gt; .gitignore</span></span></span></code></pre></div><h3 id="trường-hợp-muốn-coi-như-là-chưa-từng-có-file-đó">Trường hợp muốn coi như là chưa từng có file đó</h3>
<p>Khi mà bạn muốn: &ldquo;Hả, file nào cơ, là gì có file nào như thế ?&rdquo;</p>
<div class="highlight wrap-code"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># Trường hợp chỉ xoá khỏi lịch sử commit （để lại ở working tree） $ git filter-branch -f --index-filter &#39;git rm --cached -rf --ignore-unmatch &lt;tên file&gt;&#39; HEAD # Trường hợp xoá khỏi lịch sử commit và cả ở working tree $ git filter-branch -f --index-filter &#39;git rm -rf --ignore-unmatch &lt;tên file&gt;&#39; HEAD</span></span></span></code></pre></div><h2 id="sự-cố-4-khi-mà-tên-branh-bạn-đặt-quá-là-chuối">Sự cố 4： Khi mà tên branh bạn đặt quá là &ldquo;chuối&rdquo;</h2>
<p>Nếu không ai nhìn thấy thì ta &ldquo;bí mật&rdquo; sửa lại tên branch thôi nào !</p>
<div class="highlight wrap-code"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ git branch -m &lt;tên branch sau khi đổi&gt;</span></span></code></pre></div><h2 id="sự-cố-5-khi-trong-phút-nông-nổi-bạn-lỡ-commit-và-giờ-muốn-commit-đó-biến-mất">Sự cố 5： Khi trong phút nông nổi bạn lỡ commit và giờ muốn commit đó biến mất</h2>
<h3 id="không-để-cho-ai-biết--người-khác-vẫn-chưa-pull-về">Không để cho ai biết （＝ người khác vẫn chưa pull về）</h3>
<p>Sửa lại phần lịch sử commit ngay trước đó</p>
<div class="highlight wrap-code"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># Tuỳ vào từng trường hợp mà ta có 3 cách sau để đưa lịch sử commit về như cũ # 1. Chỉ đưa HEAD về như cũ $ git reset --soft HEAD~ # 2. Đưa HEAD và index về như cũ $ git reset HEAD~ # 3. Đưa cả index, working tree về 1 commit trước đó $ git reset --hard HEAD~</span></span></span></code></pre></div><h3 id="trường-hợp-đã-bị-ai-đó-phát-hiện-người-khác-đã-pull-về">Trường hợp đã bị ai đó phát hiện（＝ người khác đã pull về）</h3>
<p>Nếu thay đổi lịch sử commit sẽ dẫn đến tình trạng lộn xộn nên ta cầm dùng commit xoá để giải quyết</p>
<h2 id="sự-cố-6-khi-muốn-tổng-hợp-những-commit-vụn-vặt-trước-đây-thành-một-commit">Sự cố 6： Khi muốn tổng hợp những commit vụn vặt trước đây thành một commit</h2>
<p>Sử dụng <code>rebase</code> + <code>squash</code> (or <code>fixup</code>) để tổng hợp lại các commit cũ</p>
<div class="highlight wrap-code"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># Rebase về n commit trước (có bao gồm cả HEAD) # Ví dụ) git rebase -i HEAD~3 $ git rebase -i HEAD~&lt;số lượng commit&gt; ==== # Sau lệnh này sẽ mở ra editor nên hãy sửa lại như sau rồi lưu lại # (trước khi sửa) các commit cũ từ trên xuống dưới pick aa11bbc commit message 1 pick b2c3c4d commit message 2 pick 4e56fgh commit message 3 ・・・ # (sau khi sửa) các commit trước là squash sẽ được tổng hợp vào 1 commit ở đằng trước pick aa11bbc commit message 1 squash b2c3c4d commit message 2 squash 4e56fgh commit message 3 ・・・ ====</span></span></span></code></pre></div><p>Thay vì dùng <code>squash</code> có thể dùng <code>fixup</code> nhưng khi đó commit message của những commit được fixup sẽ bị mất</p>
<h2 id="sự-cố-７-khi-bạn-muốn-chia-commit-to-thành-những-commit-nhỏ-hơn-một-cách-thông-minh">Sự cố ７： Khi bạn muốn chia commit to thành những commit nhỏ hơn một cách thông minh</h2>
<p>Ở mục 6, tuy tổng hợp lại là tốt nhưng khi tổng hợp quá nhiều cũng sẽ trở thành vấn đề Rất tiện khi mà những commit chức năng bị lẫn vào những commit sửa bug</p>
<div class="highlight wrap-code"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># Đây là việc không làm sau khi đã push code lên remote # Đầu tiên là đưa HEAD và index về 1 commit trước đó # Nói cách khác là ta coi như là chưa từng có commit to đùng kia và chỉ giữ lại trạng thái của working tree $ git reset HEAD~ # Dùng lệnh sau đây để thêm (y) hoặc không thêm (n) các phần nhỏ (=hunk) vào index # Nếu các phần nhỏ đó vẫn chưa đủ nhỏ thì dùng (s) để tiếp tục chia nhỏ hơn （Chi tiết của git add -p thì hãy hỏi anh Google nhé） $ git add -p # Khi các phần cần thay đổi đã có thì ta commit $ git commit -m &#34;commit message&#34; # Sau đó ta lặp đi lặp lại các bước như trên cho phần còn lại</span></span></span></code></pre></div><h2 id="sự-cố-８-khi-lỡ-tay-commit-nhầm-sang-một-branch-khác">Sự cố ８： Khi lỡ tay commit nhầm sang một branch khác</h2>
<p>Có những lúc ta sơ suất lỡ tay commit thẳng vào master trong khi thực ra là muốn commit vào một branch khác</p>
<div class="highlight wrap-code"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># Đầu tiên là tạo một branch khác chứa trạng thái mà ta đã commit $ git branch other-branch # Đưa HEAD, index của master về 1 commit trước đó $ git reset --hard HEAD~ # Check out sang branch có commit trước đó $ git checkout other-branch</span></span></span></code></pre></div><h2 id="sự-cố-９-khi-muốn-xoá-hoàn-toàn-các-file-không-cần-thiết">Sự cố ９： Khi muốn xoá hoàn toàn các file không cần thiết</h2>
<p>Có những lúc ta muốn 1 phát xoá tất tần tật những file tự động sinh ra hoặc những file tự động back up. Nếu không phải là những file cần git quản lý hoặc những file sẽ commit thì xoá đi thôi. Ơ mà cái này cũng ko phải là sự cố nhỉ&hellip;</p>
<div class="highlight wrap-code"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># Đầu tiên là add＆commit tất cả những thứ cần thiết lại # Nếu không làm như thế này thì những file này cũng bị xoá mất đó $ git add &lt;file cần commit&gt; $ git commit -m &#34;commit message&#34; # Dùng git stash để sơ tán cả những file untracked $ git stash -u # drop các thứ đã stash để xoá đi $ git stash drop</span></span></span></code></pre></div><p>Tiện đây thì trong trường hợp chỉ là những file mà git không quản lý thì chỉ như sau là OK</p>
<div class="highlight wrap-code"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># Kiểm tra lại các file sẽ xoá cho chắc $ git clean -n # Tiến hành xoá bỏ $ git clean -f</span></span></span></code></pre></div><h2 id="sự-cố-10-khi-tạm-thời-cần-tạm-dừng-công-việc-hiện-tại-và-chuyển-sang-một-branch-khác">Sự cố 10： Khi tạm thời cần tạm dừng công việc hiện tại và chuyển sang một branch khác</h2>
<p>Tuy mình không xấu nhưng có những lúc cần phải tạm dừng công việc để làm việc khác</p>
<div class="highlight wrap-code"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># Tạm thời lưu lại các phần công việc còn đang làm dở $ git stash -u # Chuyển sang một branch khác và làm việc $ git checkout -b other-branch ~làm việc, làm việc, làm việc~ $ git add &lt;các file cần thiết&gt; $ git commit -m &#34;commit message&#34; # Trở về branch cũ $ git checkout origin-branch # Lấy lại các nội dung công việc đang làm dở trước đó $ git stash pop</span></span></span></code></pre></div><h2 id="sự-cố-11khi-lỡ-tay-xoá-mất-một-commit-cực-kì-cực-kì-quan-trọng">Sự cố 11：Khi lỡ tay xoá mất một commit cực kì cực kì quan trọng</h2>
<p>Đây hẳn là sự cố khủng khiếp nhất. Có thể xảy ra khi lỡ tay <code>git reset --hard</code> Tuy nhiên, commit nào cũng có thể hồi phục được</p>
<div class="highlight wrap-code"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># Đầu tiên là xem lại toàn bộ lịch sử commit $ git reflog # Từ đó chọn commit muốn phục hồi và khôi phục lại # ví dụ）git reset --hard HEAD@{2} $ git reset --hard &lt;commit&gt;</span></span></span></code></pre></div><h2 id="sự-cố-12-khi-lỡ-tay-xoá-mất-branch-và-muốn-lấy-lại">Sự cố 12： Khi lỡ tay xoá mất branch và muốn lấy lại</h2>
<p>Nếu vẫn còn reflog thì không có sao. Vẫn có thể hồi phục lại được Nếu commit lên một branch không tên, sau đó check out sang một branch khác bị xoá mất thì cũng tương tự</p>
<p>Tương tự giống như sự cố 13 dưới đây</p>
<div class="highlight wrap-code"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># Đầu tiên là xem lại toàn bộ lịch sử commit $ git reflog # Từ các commit này, chọn rồi tạo branch mới # ví dụ）git branch new-branch HEAD@{2} $ git branch &lt;tên branch&gt; &lt;commit&gt;</span></span></span></code></pre></div><h2 id="sự-cố-13-khi-muốn-thay-đổi-một-phần-nội-dung-commit">Sự cố 13: Khi muốn thay đổi một phần nội dung commit</h2>
<p>Khi có những typo nhỏ và muốn chỉnh sửa thì ko cần thiết phải tạo commit mới để sửa mà hãy tiến hành sửa lại luôn</p>
<div class="highlight wrap-code"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># Chỉ định commit muốn sửa lại $ git rebase -i &lt;commit&gt; ==== # Sau lệnh này sẽ mở ra editor nên hãy sửa lại như sau rồi lưu lại # (trước khi sửa) các commit cũ từ trên xuống dưới pick aa11bbc commit message 1 pick b2c3c4d commit message 2 pick 4e56fgh commit message 3 ・・・ # (Sau khi sửa) Đổi commit cần sửa sang edit edit aa11bbc commit message 1 pick b2c3c4d commit message 2 pick 4e56fgh commit message 3 ・・・ ==== # Commit cần sửa sẽ được khai triển working tree nên ta chỉ cần sửa rồi sau đó add lại $ git add &lt;tên file&gt; # Sửa lại commit $ git commit --amend # Hoàn tất rebase để trở lại như cũ $ git rebase --continue # Khi muốn huỷ bỏ rebase $ git rebase --abort</span></span></span></code></pre></div><h2 id="sự-cố-14-khi-có-conflict-trong-quá-trình-rebase">Sự cố 14: Khi có conflict trong quá trình rebase</h2>
<p>Khi không merge mà tiến hành rebase thì nếu có conflict, chắc hẳn là hoảng loạn rồi</p>
<div class="highlight wrap-code"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># Khi đang ở branch1 rồi rebase từ branch2 vào $ git rebase branch2 ~~ Phát sinh conflict ~~ # Sẽ trở thành branch không tên nền cần phải chú ý $ git branch * (no branch, rebasing branch2) branch1 branch2 master # Hãy cố gắng giải quyết các conflict # Sau khi hoàn thành, ta add rồi tiến hành rebase $ git add &lt;tên file&gt; # Thay đổi commit $ git commit --amend $ git rebase --continue</span></span></span></code></pre></div><h3 id="sự-cố-15-khi-đã-merge-nhưng-lại-muốn-trở-lại-như-lúc-trước">Sự cố 15: Khi đã merge nhưng lại muốn trở lại như lúc trước</h3>
<p>Chỉ cho trường hợp mà người khác vẫn chưa pull code về</p>
<div class="highlight wrap-code"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># tiến hành merge $ git checkout &lt;tên brach nguồn&gt; $ git merge &lt;tên branch muốn merge&gt; # Sau khi merge, nhưng lại muốn trở lại như trước thì làm như sau # Nếu chỉ định là ORIG_HEAD thì có thể trở lại trạng thái trước khi merge $ git reset --hard ORIG_HEAD</span></span></span></code></pre></div><h2 id="ở-trên-remote">Ở trên Remote</h2>
<h2 id="sự-cố-16-khi-pull-từ-remote-về-thì-có-quá-nhiều-conflict-nên-tạm-thời-muốn-trở-lại-như-cũ">Sự cố 16: Khi pull từ remote về thì có quá nhiều conflict nên tạm thời muốn trở lại như cũ</h2>
<p>Sau khi pull code về cập nhật nhưng thấy conflict nhiều như núi thì quả là muốn trở lại như cũ Gần giống như sự cố 15</p>
<div class="highlight wrap-code"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># Lấy từ code mới remote $ git pull origin master # Phát sinh conflict # Suy nghĩ lại thì trong pull(fetch + merge) muốn bỏ phần merge đi $ git reset --hard ORIG_HEAD</span></span></span></code></pre></div><h2 id="sự-cố-17-lỡ-tay-push-force-lên-master-trên-remote">Sự cố 17: Lỡ tay push force lên master trên remote</h2>
<p>Việc <code>push -f</code> lên origin/master là việc bị cấm Tuy nhiên thì thỉnh thoảng vẫn có một số người làm&hellip;</p>
<p>Ta sẽ sửa lại như sau</p>
<h3 id="trường-hợp-chỉ-cần-push-về-1-commit-trước-đó">Trường hợp chỉ cần push về 1 commit trước đó</h3>
<div class="highlight wrap-code"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># Cái này ko được làm đâu nhé, push force $ git commit -m &#34;commit message&#34; $ git push -f origin master # Nếu là một công ty nghiêm túc thì đến đây chắc chắn sẽ nổi giận đấy # Nếu muốn đưa về 1 commit tước đó thì làm như sau $ git push -f origin HEAD~:master</span></span></span></code></pre></div><p>Nếu trên local cũng muốn như vậy thì tiến hành reset cũng tốt</p>
<div class="highlight wrap-code"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ git reset HEAD~ $ git push -f origin master</span></span></code></pre></div><h3 id="nếu-muốn-xoá-đi-vài-commit-trước-đó">Nếu muốn xoá đi vài commit trước đó</h3>
<div class="highlight wrap-code"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># Cái này ko được làm đâu nhé, push force $ git commit -m &#34;commit message&#34; $ git push -f origin master # Khi bị mắng và muốn trở về như cũ thì $ git rebase -i &lt;commit muốn rebase về&gt; ==== # Sau lệnh này sẽ mở ra editor nên hãy sửa lại như sau rồi lưu lại # (trước khi sửa) các commit cũ từ trên xuống dưới pick aa11bbc commit message 1 pick b2c3c4d commit message 2 ・・・ # (Sau khi sửa) Xoá các commit không cần thiết đi pick b2c3c4d commit message 2 ・・・ ==== # push force lại một lần nữa $ git push -f origin master</span></span></span></code></pre></div><h2 id="sự-cố-18-sau-khi-release-phát-hiện-thấy-có-bug-và-muốn-trở-về-như-cũ">Sự cố 18: Sau khi release phát hiện thấy có bug và muốn trở về như cũ</h2>
<p>Do phát sinh thiệt hại nên những thứ đã merge và maste cần phải chuyển tạm thời về như cũ Tuy nhiên không thể revert từng commit 1 nếu có nhiều commit</p>
<div class="highlight wrap-code"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># Kiểm tra commit log $ git log --oneline --graph ==== * 1x3y5z7 - Merge pull request #4 from develop |\ | * a2b45c7 - (develop) commit 3 * | dbc65f4 - commit 2 * | f0b0a91 - commit 1 # Chỉ định điểm muốn revert về (Cơ bản 1 là OK) ==== # Nếu merge develop vào master thì chỉ định master sẽ là １、develop là ２ rồi revert # Ví dụ）git revert -m 1 1x3y5z7 $ git revert -m 1 commit merge&gt;</span></span></span></code></pre></div><p>Nếu vẫn chưa có ai kéo phần code này về thì có thể làm đươc cả những việc sau nữa（Cái này nguy hiểm）</p>
<div class="highlight wrap-code"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># Trở về trạng thái trước khi merge $ git reset ORIG_HEAD # PUSH FORCE $ git push -f origin master</span></span></span></code></pre></div><h2 id="sự-cố-19khi-sau-khi-chuyển-lại-và-đã-commit-thêm-một-số-commit-mới-nhưng-không-thể-merge-lại-được">Sự cố 19：Khi sau khi chuyển lại và đã commit thêm một số commit mới nhưng không thể merge lại được</h2>
<p>Ở sự cố 18, khi đã xoá bỏ merge, tiến hành chỉnh sửa nhưng merge lại không được</p>
<p>commit revert không có nghĩa là sẽ ko còn commit merge nữa mà là làm ngược lại những việc mà commit merge làm</p>
<p>Thế nên, khi merge lại thì cần phải revert lại commit revert</p>
<div class="highlight wrap-code"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># Tiếp tục của sự cố 18 # Thêm commit vào develop branch $ git checkout develop $ git commit -m &#34;commit message&#34; # Checkout sang master $ git checkout master # revert lại commit revert $ git revert &lt;commit revert&gt; # merge develop $ git merge develop</span></span></span></code></pre></div><h2 id="khi-muốn-thử-những-điều-trên-ở-một-môi-trường-an-toàn-thì">Khi muốn thử những điều trên ở một môi trường an toàn thì</h2>
<p>Đúng là nếu chưa quen mà tự nhiên lại thực hành luôn thì rất vất vả.</p>
<p>Những ai đã có sản phầm thì có thể clone về và dùng cái đó để test thử</p>
<p>Nếu thế thì cho dù có bị thất bại thì cũng không gây ảnh hưởng gì đến môi trường làm việc chính.</p>
<p>Những ai chưa có sản phẩm có thể lên Github, tìm hiếm 1 repo nào đó nổi tiếng, clone về rồi thực hành</p>
<p>Tuy nhiên cần chú ý 1 điều là những cái này chỉ được thử ở trên môi trường local thôi nhé</p>
<p>Nếu muốn thử cả ở trên remote nữa thì có thể chuẩn bị sẵn môi trường test trên Github, clone về rồi thử</p>
<p>Hình dung cơ bản như sau</p>
<div class="highlight wrap-code"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># git clone về $ git clone &lt;URL của repository&gt; # Thử nghiệm trên local # Kiểm tra remote hiện tại $ git remote -v # Xoá remote đã đăng ký $ git remote rm origin # Tạo remote đã được chuẩn bị sẵn cho test ở Github và thay đổi lại remote $ git remote add origin &lt;URL của repository mới&gt; # Sau đó là thử nghiệm trêm remote</span></span></span></code></pre></div>
            <footer class="footline">
<div class=" taxonomy-categories term-list cstyle  " title="Categories" style="--VARIABLE-TAGS-BG-color: var(--INTERNAL-TAG-BG-color);">
  <i class="fa-fw fas fa-layer-group"></i>
  <ul>
    <li><a class="term-link" href="../../../categories/github/index.html">Github</a></li>
  </ul>
</div>
            </footer>
          </article>

        </div>
      </main>
    </div>
    <script src="../../../js/clipboard.min.js?1712916290" defer></script>
    <script src="../../../js/perfect-scrollbar.min.js?1712916290" defer></script>
    <script src="../../../js/theme.js?1712916290" defer></script>
  </body>
</html>
